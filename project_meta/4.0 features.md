# CityPulse v4.0 - The "Realism & Resilience" Update

## Overview
Version 4.0 transforms CityPulse from a simple swiping game into a **multi-layered urban simulation**. It introduces persistent crises, a scenario modes system, and deepens the connection to DMP2025 with specific policy dilemmas and a dedicated "Citizen Voice" mechanic.

## Key Features

### 1. Scenario Mode System
Players can now choose their starting challenge, changing the game rules and narrative context.
*   **The Standard Run**: Balanced gameplay for new planners.
*   **The Silver Tsunami (Aging)**:
    *   **Context**: 1 in 4 Singaporeans are over 65.
    *   **Modifiers**: Health decays 2x faster. "Community Care" cards appear more often.
    *   **Goal**: Prove a city can age gracefully.
*   **Climate Siege (Resilience)**:
    *   **Context**: Sea levels are rising.
    *   **Modifiers**: "Sumatra Squall" and "Heatwave" crises trigger 2x more often. Budget is tight (-15 start).
    *   **Goal**: Survive nature's wrath.

### 2. Persistent Crisis & Intervention Loop
Crises are no longer one-off events. They stay until solved.
*   **Status Effects**: Active crises drain resources every turn (e.g., Flood: -5 Budget/turn).
*   **Visual Feedback**: 3D City reflects the crisis (Red pulsing sky, storm clouds).
*   **Solution Cards**: Special blue cards appear to resolve crises (e.g., "Deploy ABC Waters" to fix Floods).

### 3. Expanded "Citizen Voice" (Press Conference 2.0)
We added **13 New Press Conference Cards** (IDs 200+) to simulate real Town Halls.
*   **Topics**: Covers sensitive issues like *The PLH Debate*, *Nature vs. Homes*, and *The Long Island Price Tag*.
*   **Mechanic**: Players must type out a justified response, simulating the communication aspect of planning.
*   **Balancing**: Capped to maximum **2 per game** to maintain pacing.

### 4. 3D City Mobile Optimization
The 3D visualization is now fully responsive for PWA/Mobile use.
*   **Adaptive Camera**: Automatically calculates aspect ratio to zoom out on portrait screens (`distanceMultiplier`).
*   **Touch Optimizations**: Larger touch targets for rotation and interaction.
*   **"View City" Everywhere**: Accessible from Main Menu, Results Screen, and Audit Log.

### 5. UI/UX Refinements
*   **New Typography**: Switched to `Outfit` (Headings) and `Inter` (Body) for a premium, clean look.
*   **Circular Back Buttons**: Consistent navigation across screens.
*   **Score Overlay**: 3D View now shows live grades (S-F) and resource stats.

## Technical Enhancements
*   **Centralized Crisis Config**: `crisisConfig.js` manages all crisis logic, weights, and solution mappings.
*   **Scenario Config**: `scenarioConfig.js` defines modifiers and unique card decks for each mode.
*   **State Management**: `activeCityData` logic in `App.jsx` cleanly separates "Current Game" vs "Historical Receipt" viewing modes.
*   **Responsive 3D Logic**: `City3D.jsx` uses `window.resize` listeners and math-based camera positioning.
