# CityPulse v3.0 - 3D City & Critical Events

## Overview
Version 3.0 introduces a fully interactive 3D city visualization that evolves in real-time based on player decisions. This replaces the previous 2D background with a dynamic React Three Fiber scene. The update also adds visual effects for crisis events and an interactive "View City" mode for players to explore their creation.

## Key Features

### 1. Interactive 3D City Visualization
- **Technology**: Built with `@react-three/fiber` and `@react-three/drei`.
- **Procedural Generation**: Buildings are generated procedurally based on card "stickers" (e.g., parks, towers, factories).
- **Dynamic Atmosphere**:
    - **Happiness**: Controls sky color (Warm Gold ↔ Stormy Grey).
    - **Health**: Controls atmospheric fog/haze (Clear ↔ Smog).
    - **Budget**: Controls building window glow (Vibrant ↔ Dim).
    - **Land**: Controls ground plane appearance.

### 2. Enhanced Building Models
- **Variety**: Over 10 distinctive building types including:
    - **Skyscrapers**: Glass towers with window bands.
    - **Heritage**: Traditional shophouses with sloped roofs.
    - **Tech Hubs**: Futuristic towers with glowing rings and antennas.
    - **Industrial**: Factories with smokestacks and orange activity lights.
    - **Nature**: Parks with layered trees and community gardens.
    - **Infrastructure**: Bridges, islands, and canals.
- **Animations**: Buildings spawn with a smooth spring animation when cards are approved.

### 3. Crisis Visual Effects
Visual representation of crisis events directly in the 3D scene:
- **Flash Flood** (5 cards): Rain particles, rising water level, stormy lighting.
- **Heat Wave** (10 cards): Heat shimmer particles, orange ground glow, intense sun glare.

### 4. Showcase Mode (View City)
- **Toggle Button**: "View City" button allows players to hide the interface and see the full city.
- **Interactive Controls**: Users can zoom and rotate the camera freely in this mode.
- **Clickable Buildings**:
    - Players can click on buildings to see an info tooltip.
    - Tooltip displays the building name, type, and an educational description of its urban planning function.
    - Smooth fade-in/out animations for the UI.

## Technical Details
- **Performance**: Optimized low-poly models to maintain performance on mobile.
- **State Integration**: Connected directly to `GameEngine` stats for real-time updates.
- **Build Size**: Added ~386KB (gzipped) for 3D engine capabilities.
